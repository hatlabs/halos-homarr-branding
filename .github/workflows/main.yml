name: Main Branch CI/CD

on:
  push:
    branches: [main]
  workflow_dispatch:  # Allow manual triggering

concurrency:
  group: ${{ github.repository }}-main-release
  cancel-in-progress: false

permissions:
  contents: write

jobs:
  build-release:
    uses: halos-org/shared-workflows/.github/workflows/build-release.yml@main
    with:
      package-name: halos-homarr-branding
      package-description: 'HaLOS branding for Homarr dashboard'
      apt-distro: trixie
      apt-component: main
      skip-tests: true
    secrets:
      APT_REPO_PAT: ${{ secrets.APT_REPO_PAT }}
